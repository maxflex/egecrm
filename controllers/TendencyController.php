<?php	// Контроллер	class TendencyController extends Controller	{		public $defaultAction = "index";		public static $allowed_users = [User::USER_TYPE, Teacher::USER_TYPE, Student::USER_TYPE];		// Папка вьюх		protected $_viewsFolder	= "tendency";		public function actionIndex()		{			$this->setTabTitle("Тенденции");            $this->addJs('ng-tendency-app');            $this->render('index');            $ang_init_data = angInit([                "Subjects" 		=> Subjects::$three_letters,                "Grades"		=> Grades::$all,                "GroupLevels"	=> GroupLevels::$short,                "Branches"		=> Branches::$all,            ]);            $this->render("index", [                "ang_init_data" => $ang_init_data            ]);		}        public function actionAjaxSearch()        {            extract($_POST['search']);            $query = dbConnection()->query("SELECT COUNT(*) as cnt FROM requests WHERE adding=0 AND date>='2016-05-01' "                . (isset($subjects) ? " AND subjects='" . implode(',', $subjects) . "'" : "")                . (isset($grades) ? " AND grade='" . implode(',', $grades) . "'" : "")                . (isset($branches) ? " AND branches='" . implode(',', $branches) . "'" : ""));            returnJsonAng($query->fetch_object()->cnt);        }	}