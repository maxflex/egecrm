<?php	// Контроллер	class SearchController extends Controller	{		public $defaultAction = "search";				// Папка вьюх		protected $_viewsFolder	= "search";				/**		 * Список уведомлений.		 * 		 */		public function actionSearch()		{			extract($_POST);						$this->setTabTitle("Рультаты поиска по запросу «". $text. "»");			$this->addJs("ng-search-app");						// Ищем ID студентов			$student_ids = Student::search($text, [], true);						// Ищем заявки			$Requests = Request::search($text, [				"condition" => "adding=0 OR (id_student IN (". implode(",", $student_ids) .") AND adding=0)",			]);			/*			$Requests = Request::findAll([				"condition" => "id_student IN (". implode(",", $student_ids) .")"				]);*/						// Добавляем дубликаты			foreach ($Requests as &$Request) {				$Request->duplicates = $Request->getDuplicates();				}						// Данные для ангуляра			$ang_init_data = angInit([				"requests"		 	=> $Requests,			]);						$this->render("results", [				"ang_init_data"	=> $ang_init_data,				"Requests"		=> $Requests,			]);		}				##################################################		###################### AJAX ######################		##################################################							}